{"version":3,"sources":["webpack:///webpack/bootstrap 9400d013fce06fcb88c0","webpack:///external \"mongoose\"","webpack:///./src/index.js","webpack:///external \"express\"","webpack:///external \"body-parser\"","webpack:///external \"cors\"","webpack:///external \"dotenv\"","webpack:///./models/Contract.js","webpack:///./models/User.js","webpack:///external \"apollo-server-express\"","webpack:///external \"graphql-tools\"","webpack:///./schema.js","webpack:///./resolvers.js"],"names":["express","require","mongoose","bodyParser","cors","config","path","Contract","User","graphiqlExpress","graphqlExpress","makeExecutableSchema","typeDefs","resolvers","schema","connect","process","env","MONGO_URI","app","corsOptions","origin","credentials","use","endpointURL","json","limit","extended","urlencoded","context","PORT","listen"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,KAAK;QACL;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA;;;;;;;AC7DA,qC;;;;;;;;;;;;;ACAA,MAAMA,UAAUC,mBAAOA,CAAC,CAAR,CAAhB;AACA,MAAMC,WAAWD,mBAAOA,CAAC,CAAR,CAAjB;AACA,MAAME,aAAaF,mBAAOA,CAAC,CAAR,CAAnB;AACA,MAAMG,OAAOH,mBAAOA,CAAC,CAAR,CAAb;AACAA,mBAAOA,CAAC,CAAR,EAAkBI,MAAlB,CAAyB,EAAEC,MAAM,eAAR,EAAzB;;AAEA;AACA,MAAMC,WAAWN,mBAAOA,CAAC,CAAR,CAAjB;AACA,MAAMO,OAAOP,mBAAOA,CAAC,CAAR,CAAb;;AAEA;AACA,MAAM,EAAEQ,eAAF,EAAmBC,cAAnB,KAAsCT,mBAAOA,CAAC,CAAR,CAA5C;AACA,MAAM,EAAEU,oBAAF,KAA2BV,mBAAOA,CAAC,EAAR,CAAjC;;AAEA,MAAM,EAAEW,QAAF,KAAeX,mBAAOA,CAAC,EAAR,CAArB;AACA,MAAM,EAAEY,SAAF,KAAgBZ,mBAAOA,CAAC,EAAR,CAAtB;;AAEA;AACA,MAAMa,SAASH,qBAAqB,EAAEC,QAAF,EAAYC,SAAZ,EAArB,CAAf;;AAEA;AACAX,SACGa,OADH,CACWC,QAAQC,GAAR,CAAYC,SADvB;AAEA;AACA;;AAEA;AACA,MAAMC,MAAMnB,SAAZ;;AAEA,MAAMoB,cAAc;AAClBC,UAAQ,uBADU;AAElBC,eAAa;AAFK,CAApB;;AAKAH,IAAII,GAAJ,CAAQnB,KAAKgB,WAAL,CAAR;;AAEA;AACAD,IAAII,GAAJ,CAAQ,WAAR,EAAqBd,gBAAgB,EAAEe,aAAa,UAAf,EAAhB,CAArB;;AAEAL,IAAII,GAAJ,CAAQpB,WAAWsB,IAAX,CAAgB,EAAEC,OAAO,MAAT,EAAiBC,UAAU,IAA3B,EAAhB,CAAR;AACAR,IAAII,GAAJ,CAAQpB,WAAWyB,UAAX,CAAsB,EAAEF,OAAO,MAAT,EAAiBC,UAAU,IAA3B,EAAtB,CAAR;;AAEA;AACAR,IAAII,GAAJ,CACE,UADF,EAEEpB,WAAWsB,IAAX,EAFF,EAGEf,eAAe;AACbI,QADa;AAEbe,WAAS,EAAEtB,QAAF,EAAYC,IAAZ;AAFI,CAAf,CAHF;;AASA,MAAMsB,OAAOd,QAAQC,GAAR,CAAYa,IAAZ,IAAoB,IAAjC;AACAX,IAAIY,MAAJ,CAAWD,IAAX,E;;;;;;ACrDA,oC;;;;;;ACAA,wC;;;;;;ACAA,iC;;;;;;ACAA,mC;;;;;;ACAA,iBAAiB,mBAAO,CAAC,CAAU;;AAEnC;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;AC/BA,iBAAiB,mBAAO,CAAC,CAAU;;AAEnC;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;AC/BA,kD;;;;;;ACAA,0C;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7CA;AACA;AACA,yCAAyC,WAAW;AACpD;AACA;AACA,KAAK;AACL,qCAAqC,OAAO;AAC5C;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,OAAO,WAAW;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,kCAAkC,MAAM,GAAG,WAAW;AACtD,wDAAwD,MAAM;AAC9D;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,OAAO,OAAO;AACd;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9400d013fce06fcb88c0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 0\n// module chunks = 0","const express = require('express');\nconst mongoose = require('mongoose');\nconst bodyParser = require('body-parser');\nconst cors = require('cors');\nrequire('dotenv').config({ path: 'variables.env' });\n\n// Models\nconst Contract = require('.././models/Contract');\nconst User = require('.././models/User');\n\n// Bring Graphql-express middleware\nconst { graphiqlExpress, graphqlExpress } = require('apollo-server-express');\nconst { makeExecutableSchema } = require('graphql-tools');\n\nconst { typeDefs } = require('../schema');\nconst { resolvers } = require('../resolvers');\n\n// Create schema\nconst schema = makeExecutableSchema({ typeDefs, resolvers });\n\n// Connect to database\nmongoose\n  .connect(process.env.MONGO_URI);\n// .then(() => console.log('DB connected'))\n// .catch(err => console.error(err));\n\n// Initialize application\nconst app = express();\n\nconst corsOptions = {\n  origin: 'http://localhost:5000',\n  credentials: true,\n};\n\napp.use(cors(corsOptions));\n\n// Create graphiql application\napp.use('/graphiql', graphiqlExpress({ endpointURL: '/graphql' }));\n\napp.use(bodyParser.json({ limit: '50mb', extended: true }));\napp.use(bodyParser.urlencoded({ limit: '50mb', extended: true }));\n\n// Connect schemas with graphql\napp.use(\n  '/graphql',\n  bodyParser.json(),\n  graphqlExpress({\n    schema,\n    context: { Contract, User },\n  }),\n);\n\nconst PORT = process.env.PORT || 4444;\napp.listen(PORT);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cors\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 6\n// module chunks = 0","const mongoose = require('mongoose');\n\nconst Schema = mongoose.Schema;\n\nconst ContractSchema = new Schema({\n  title: {\n    type: String,\n    require: true,\n  },\n  initialDate: {\n    type: String,\n    require: true,\n  },\n  dueDate: {\n    type: String,\n    require: true,\n  },\n  file: {\n    type: String,\n    require: true,\n  },\n  createdDate: {\n    type: Date,\n    default: Date.now,\n  },\n  user: {\n    type: String,\n    require: false,\n  },\n});\n\nmodule.exports = mongoose.model('Contract', ContractSchema);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./models/Contract.js\n// module id = 7\n// module chunks = 0","const mongoose = require('mongoose');\n\nconst Schema = mongoose.Schema;\n\nconst UserSchema = new Schema({\n  name: {\n    type: String,\n    required: true,\n  },\n  lastname: {\n    type: String,\n    required: true,\n  },\n  email: {\n    type: String,\n    required: true,\n  },\n  cpf: {\n    type: String,\n    required: true,\n  },\n  phone: {\n    type: String,\n    required: true,\n  },\n  createdDate: {\n    type: Date,\n    default: Date.now,\n  },\n});\n\nmodule.exports = mongoose.model('User', UserSchema);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./models/User.js\n// module id = 8\n// module chunks = 0","module.exports = require(\"apollo-server-express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apollo-server-express\"\n// module id = 9\n// module chunks = 0","module.exports = require(\"graphql-tools\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql-tools\"\n// module id = 10\n// module chunks = 0","exports.typeDefs = `\n  type Contract {\n    _id: ID\n    title: String! \n    initialDate: String!\n    dueDate: String!\n    file: String!\n    createdDate: String!\n    user: String\n  }\n\n  type User {\n    _id: ID\n    name: String!\n    lastname: String!\n    email: String!\n    cpf: String!\n    phone: String!\n    createdDate: String!\n  }\n\n  type Query {\n    getAllContracts: [Contract]\n    getAllUsers: [User]\n  }\n  \n  type Mutation {\n    addContract(\n      title: String!, \n      initialDate: String!,\n      dueDate: String!,\n      file: String!,\n      user: String\n    ): Contract\n    deleteContract(_id: ID): Contract\n\n    registerUser(\n      name: String!, \n      lastname: String!, \n      email: String!, \n      cpf: String!, \n      phone: String!\n      createdDate: String\n    ) : User\n  }\n`;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./schema.js\n// module id = 11\n// module chunks = 0","exports.resolvers = {\n  Query: {\n    getAllContracts: async (root, args, { Contract }) => {\n      const allContracts = await Contract.find();\n      return allContracts;\n    },\n    getAllUsers: async (root, args, { User }) => {\n      const allUsers = await User.find();\n      return allUsers;\n    },\n  },\n  Mutation: {\n    addContract: async (\n      root,\n      {\n        title,\n        initialDate,\n        dueDate,\n        file,\n        user,\n      },\n      { Contract },\n    ) => {\n      const newContract = await new Contract({\n        title,\n        initialDate,\n        dueDate,\n        file,\n        user,\n      }).save();\n      return newContract;\n    },\n    deleteContract: async (root, { _id }, { Contract }) => {\n      const contract = await Contract.findOneAndRemove({ _id });\n      return contract;\n    },\n    registerUser: async (\n      root,\n      {\n        name,\n        lastname,\n        email,\n        cpf,\n        phone,\n        createdDate,\n      },\n      { User },\n    ) => {\n      const user = await User.findOne({ name });\n      if (user) throw new Error('User already exists!');\n      const newUser = await new User({\n        name,\n        lastname,\n        email,\n        cpf,\n        phone,\n        createdDate,\n      }).save();\n      return newUser;\n    },\n  },\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resolvers.js\n// module id = 12\n// module chunks = 0"],"sourceRoot":""}